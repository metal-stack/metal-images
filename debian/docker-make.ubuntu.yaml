---
version: '1'
name: ubuntu
username: metalstack
registry-host: quay.io
default-build-args:
  - http_proxy=${HTTP_PROXY}
  - https_proxy=${HTTP_PROXY}
  - HTTP_PROXY=${HTTP_PROXY}
  - HTTPS_PROXY=${HTTP_PROXY}
  - NO_PROXY=${NO_PROXY}
  - no_proxy=${NO_PROXY}
  - IGNITION_BRANCH=v0.34.0
  - YQ_VERSION=2.4.1
  - GOLLDPD_VERSION=v0.2.3
  - METAL_NETWORKER_VERSION=v0.1.2
  - SEMVER_PATCH=${SEMVER_PATCH}
  - BASE_OS_NAME=ubuntu
  - DOCKER_APT_OS=ubuntu
  - DOCKER_APT_CHANNEL=disco
builds:
  -
    name: "Ubuntu 20.04"
    tags:
      - ${SEMVER}
      - ${SEMVER_MAJOR_MINOR}
    build-args:
      - BASE_OS_VERSION=20.04
      - FRR_VERSION=7.2-ubuntu-20.04
      - SEMVER_MAJOR_MINOR=20.04
      - SEMVER=${SEMVER_MAJOR_MINOR}${SEMVER_PATCH}
    after:
      - OS_NAME=ubuntu SEMVER_MAJOR_MINOR=${SEMVER_MAJOR_MINOR} SEMVER_PATCH=${SEMVER_PATCH} ../export.sh
  -
    name: "Ubuntu 19.10"
    tags:
      - ${SEMVER}
      - ${SEMVER_MAJOR_MINOR}
    build-args:
      - BASE_OS_VERSION=19.10
      - FRR_VERSION=7.2-ubuntu-19.10
      - SEMVER_MAJOR_MINOR=19.10
      - SEMVER=${SEMVER_MAJOR_MINOR}${SEMVER_PATCH}
    after:
      - OS_NAME=ubuntu SEMVER_MAJOR_MINOR=${SEMVER_MAJOR_MINOR} SEMVER_PATCH=${SEMVER_PATCH} ../export.sh